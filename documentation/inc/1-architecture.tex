\section{Архитектура системы}

Предполагается следующая архитектура системы (рис. \ref{fig:ais}).

\addimghere{img/system_architecture}{1.0}{Архитектура интеллектуальной системы}{fig:ais}

Для построения интерфейсов пользователя будет использоваться tkinter, база данных будет представлена в виде словаря Python, а база знаний будет храниться в JSON.

Работа системы основана на очереди сообщений.

\subsection{База знаний}

Правила задаются в виде пар (антецедент, консеквент).
Причём антецедент должен быть представлен в виде конъюнктов элементарных высказываний.
Элементарные высказывания задаются тройкой (переменная, оператор сравнения, переменная или константа),
вместе с правилом будет храниться автоматический список используемых переменных для ускорения поиска соответствующих правил.
Консеквент будет содержать список пар (переменная, значение).
При истинном значении антецедента в модуль трассировки будет отправляться правило вместе с текущими значениями переменных.
Пользователю будут отображаться вычисленные значения целевых переменных с возможными рекомендациями.

Минимальный пример базы знаний:


% Проблемы с кириллицей
\begin{lstlisting}
{
	"rules": [
		{
			"antecedent": [["t", ">", 36.6]],
			"consequent": ["result", "%температура повыена%"],
			"recommendation": "%Снизить температуру%"
		},
		{
			"antecedent": [["t", "<", 35.5], ["P_low", "<", 120]],
			"consequent": ["state", "t*P_low"],
			"recommendation": "%Низкие температура и давление%"
		}
	],
	"input_variables": [
		{
			"name": "t",
			"type": "float",
			"description": "Текущая температура тела человека"
		}
	]
}
\end{lstlisting}

\subsection{База данных}

Для хранения базы данных будет использоваться словарь Python, хранящий пары (имя переменной, значение).

Так как используется только один экземпляр базы данных на всю экспертную систему, используется паттерн <<Одиночка>> \cite{gammaDesignPatternsElements1995}.

\subsection{Модуль принятия решения}

Экземпляр модуля принятия решения создаётся в ядре.
Затем анализируется база знаний и отправляется запрос в модуль ввода-вывода для получения начальных данных.

\subsection{Модуль ввода-вывода}

Модуль ввода-вывода представлен абстрактным классом со следующими методами: чтение переменной.

\subsubsection{Интерфейс командной строки}

\subsection{Ядро}

Ядро системы представляет собой класс для связи других элементов системы.

При инициализации ядро принимает путь к файлу базы знаний и загружает её в память.
